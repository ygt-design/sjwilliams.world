"use strict";(self.webpackChunksjwilliams_world=self.webpackChunksjwilliams_world||[]).push([[676],{676:(e,t,l)=>{l.r(t),l.d(t,{default:()=>i});var s=l(43),a=l(675);const n={workItem:"WorkItem_workItem__N4eQ2",workItemLink:"WorkItem_workItemLink__CsaFY",fadeInAnimation:"WorkItem_fadeInAnimation__bPftD",blocksContainer:"WorkItem_blocksContainer__K8J7Z",coverBlocks:"WorkItem_coverBlocks__6gF2R",coverBlock:"WorkItem_coverBlock__zS2q-",titleBlock:"WorkItem_titleBlock__jkBsg",blockImage:"WorkItem_blockImage__rrpPh"};var r=l(579);const o=e=>{let{channel:t,index:l}=e;const[o,c]=(0,s.useState)(t),[i,d]=(0,s.useState)(!1);if((0,s.useEffect)((()=>{if(t.contents_count&&t.contents&&t.contents.length<t.contents_count){(async()=>{d(!0);try{const e=200;let l=1,s=[],a=null;do{const n=await fetch(`https://api.are.na/v2/channels/${t.id}?per=${e}&page=${l}`,{headers:{Authorization:"Bearer J7ruXpTpvNRJGQNdJ6x4d_a2Pr396ODnIWFWVei_-1E"}}),r=await n.json();1===l&&(a=r),s=s.concat(r.contents),l++}while(s.length<t.contents_count);const n={...a,contents:s};c(n)}catch(e){console.error("Error fetching full channel data:",e)}finally{d(!1)}})()}}),[t]),!t.title||!t.title.startsWith("-"))return null;const h=o.contents.filter((e=>e.title&&"cover"===e.title.trim().toLowerCase())),m=o.contents.filter((e=>e.title&&"title"===e.title.trim().toLowerCase()));return(0,r.jsx)(a.N_,{to:`/case-study/${t.id}`,className:n.workItemLink,style:{animationDelay:.2*l+"s"},children:(0,r.jsxs)("div",{className:`${n.workItem} ${n.fadeIn}`,children:[i&&(0,r.jsx)("p",{children:"Loading full channel data..."}),(0,r.jsxs)("div",{className:n.blocksContainer,children:[(0,r.jsx)("div",{className:n.coverBlocks,children:h.length>0?h.map(((e,t)=>{var l,s,a,o;return(0,r.jsxs)("div",{className:n.coverBlock,children:[e.class&&"image"===e.class.toLowerCase()&&(0,r.jsx)("img",{src:(null===(l=e.image)||void 0===l||null===(s=l.original)||void 0===s?void 0:s.url)||(null===(a=e.image)||void 0===a?void 0:a.url),alt:"Cover",className:n.blockImage}),e.class&&"attachment"===e.class.toLowerCase()&&(0,r.jsx)("a",{href:null===(o=e.attachment)||void 0===o?void 0:o.url,children:"Attachment"}),!e.class&&(0,r.jsx)("p",{children:e.title})]},`cover-${t}`)})):(0,r.jsx)("p",{children:"No Cover Blocks Found"})}),(0,r.jsx)("div",{className:n.titleBlocks,children:m.length>0?m.map(((e,t)=>{var l,s,a,o;return(0,r.jsxs)("div",{className:n.titleBlock,children:[e.class&&"image"===e.class.toLowerCase()&&(0,r.jsx)("img",{src:(null===(l=e.image)||void 0===l||null===(s=l.original)||void 0===s?void 0:s.url)||(null===(a=e.image)||void 0===a?void 0:a.url),alt:"Title",className:n.blockImage}),e.class&&"attachment"===e.class.toLowerCase()&&(0,r.jsx)("a",{href:null===(o=e.attachment)||void 0===o?void 0:o.url,children:"Attachment"}),(!e.class||"image"!==e.class.toLowerCase()&&"attachment"!==e.class.toLowerCase())&&(0,r.jsx)("p",{children:e.title})]},`title-${t}`)})):(0,r.jsx)("p",{children:"No Title Blocks Found"})})]})]})})},c="Work_workItemsContainer__hl3Ul",i=()=>{const[e,t]=(0,s.useState)([]),[l,a]=(0,s.useState)(!0),n=(0,s.useRef)(null);(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("https://api.are.na/v2/groups/sjwilliams-world/channels?per=100&page=1",{headers:{Authorization:"Bearer J7ruXpTpvNRJGQNdJ6x4d_a2Pr396ODnIWFWVei_-1E"}}),l=(await e.json()).channels.filter((e=>e.title&&e.title.startsWith("-")));t(l)}catch(e){console.error("Error fetching channels",e)}finally{a(!1)}})()}),[]);const i=[...e,...e],d=e=>{e.preventDefault();const t=n.current;if(!t)return;const l=t.scrollWidth/2;t.scrollLeft+=e.deltaY,t.scrollLeft>=l?t.scrollLeft=t.scrollLeft-l:t.scrollLeft<=0&&(t.scrollLeft=t.scrollLeft+l);const s=l>0?t.scrollLeft/l:0;window.dispatchEvent(new CustomEvent("workScroll",{detail:s}))},h=(0,s.useCallback)((e=>{null!==e&&(n.current=e,e.addEventListener("wheel",d,{passive:!1}))}),[]);return(0,s.useEffect)((()=>()=>{n.current&&n.current.removeEventListener("wheel",d)}),[]),(0,r.jsx)("div",{ref:h,className:c,children:i.map(((e,t)=>(0,r.jsx)(o,{channel:e,index:t},t)))})}}}]);
//# sourceMappingURL=676.b849cfe5.chunk.js.map